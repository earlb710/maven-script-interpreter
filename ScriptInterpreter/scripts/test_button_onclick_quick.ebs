// Quick Test: Button onClick Context - Basic Verification
// This is a minimal test to quickly verify the onClick context fix works

print "Creating test screen with contextual 'close screen;' button...";

screen quickTest = {
    "title": "Quick Test: onClick Context",
    "width": 350,
    "height": 200,
    "vars": [
        {
            "name": "testValue",
            "type": "string",
            "default": "Ready to test",
            "display": {
                "type": "textfield",
                "labelText": "Status:"
            }
        }
    ],
    "area": [
        {
            "name": "main",
            "type": "vbox",
            "spacing": "10",
            "padding": "20",
            "items": [
                {
                    "name": "testValue",
                    "varRef": "testValue",
                    "seq": 1
                },
                {
                    "name": "updateButton",
                    "seq": 2,
                    "display": {
                        "type": "button",
                        "labelText": "Update Value",
                        "onClick": "quickTest.testValue = 'Button clicked!'; print 'Value updated';"
                    }
                },
                {
                    "name": "closeButton",
                    "seq": 3,
                    "display": {
                        "type": "button",
                        "labelText": "Update & Close",
                        "onClick": "quickTest.testValue = 'Closing...'; print 'Closing screen'; close screen;"
                    }
                }
            ]
        }
    ]
};

print "Test screen created successfully!";
print "";
print "Expected behavior:";
print "1. Click 'Update Value' - should update the text field";
print "2. Click 'Update & Close' - should update field and close screen";
print "   WITHOUT requiring explicit screen name in 'close screen;' statement";
print "";
print "Showing test screen now...";

// Show the screen automatically
show screen quickTest;
